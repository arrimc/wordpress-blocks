(()=>{"use strict";var e,t={141:()=>{const e=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,o=window.wp.element,i=window.wp.i18n,r=window.ReactJSXRuntime;(0,e.registerBlockType)("create-block/image-before-after",{title:"Image Compare",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{fill:"currentColor",d:"M10 23v-2H3V3h7V1h2v22zm-5-5h5v-6zm9 3v-9l5 6V5h-5V3h7v18z"})}),description:"A block to compare two images side by side or one above the other.",category:"media",attributes:{imageBefore:{type:"string",default:""},imageAfter:{type:"string",default:""},orientation:{type:"string",default:"horizontal"},width:{type:"number",default:400},height:{type:"number",default:400}},edit:function({attributes:e,setAttributes:n}){const{imageBefore:s,imageAfter:l,orientation:c,height:m=400,width:d=400}=e,[h,p]=(0,o.useState)(50),[u,g]=(0,o.useState)(!1),v=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e=e=>{if(!u||!v.current)return;if(1!==e.buttons)return void g(!1);const t=v.current.getBoundingClientRect();let a;a="horizontal"===c?Math.min(100,Math.max(0,(e.clientX-t.left)/t.width*100)):Math.min(100,Math.max(0,(e.clientY-t.top)/t.height*100)),p(a)},t=()=>{g(!1)};return u&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.body.style.userSelect="none",document.body.style.cursor="horizontal"===c?"col-resize":"row-resize"),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.body.style.userSelect="",document.body.style.cursor=""}}),[u,c]);const _={position:"absolute",top:0,right:0,overflow:"hidden",zIndex:2,..."horizontal"===c?{width:"100%",height:"100%",clipPath:`inset(0 0 0 ${h}%)`}:{width:"100%",height:"100%",clipPath:`inset(${h}% 0 0 0)`}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.InspectorControls,{children:(0,r.jsxs)(a.PanelBody,{title:(0,i.__)("Settings"),initialOpen:!0,children:[(0,r.jsx)(a.PanelRow,{children:(0,r.jsx)(a.SelectControl,{label:(0,i.__)("Orientation"),value:c,options:[{label:(0,i.__)("Horizontal"),value:"horizontal"},{label:(0,i.__)("Vertical"),value:"vertical"}],onChange:e=>n({orientation:e})})}),(0,r.jsx)(a.PanelRow,{children:(0,r.jsx)(a.BaseControl,{label:(0,i.__)("Width (px)"),children:(0,r.jsx)("input",{type:"number",value:d,onChange:e=>n({width:parseInt(e.target.value)||400}),min:10,max:2e3,className:"components-text-control__input"})})}),(0,r.jsx)(a.PanelRow,{children:(0,r.jsx)(a.BaseControl,{label:(0,i.__)("Height (px)"),children:(0,r.jsx)("input",{type:"number",value:m,onChange:e=>n({height:parseInt(e.target.value)||400}),min:10,max:2e3,className:"components-text-control__input"})})}),(0,r.jsx)(a.BaseControl,{help:(0,i.__)("For optimal results, maintain identical dimensions for both images to ensure a seamless transition.")})]})}),(0,r.jsxs)("div",{...(0,t.useBlockProps)({className:`image-compare-block ${c}`,style:{width:`${d}px`,height:`${m}px`,webkitUserDrag:"none"}}),children:[(0,r.jsxs)("div",{className:"image-compare__upload-container",children:[(0,r.jsx)(t.MediaUploadCheck,{children:(0,r.jsx)(t.MediaUpload,{onSelect:e=>n({imageBefore:e.url}),allowedTypes:["image"],render:({open:e})=>(0,r.jsx)(a.Button,{onClick:e,variant:"primary",className:"image-compare__upload-button",children:s?(0,i.__)("Change Before Image"):(0,i.__)("Upload Before Image")})})}),(0,r.jsx)(t.MediaUploadCheck,{children:(0,r.jsx)(t.MediaUpload,{onSelect:e=>n({imageAfter:e.url}),allowedTypes:["image"],render:({open:e})=>(0,r.jsx)(a.Button,{onClick:e,variant:"primary",className:"image-compare__upload-button",children:l?(0,i.__)("Change After Image"):(0,i.__)("Upload After Image")})})})]}),(0,r.jsxs)("div",{ref:v,className:"image-compare__preview",style:{position:"relative"},children:[s&&(0,r.jsx)("img",{src:s,alt:(0,i.__)("Before"),className:"image-compare__before",style:{width:"100%",height:"100%",objectFit:"cover",pointerEvents:"none"}}),l&&(0,r.jsx)("div",{className:`image-compare__after-wrapper ${c}`,style:{..._,pointerEvents:"none"},children:(0,r.jsx)("img",{src:l,alt:(0,i.__)("After"),className:"image-compare__after",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,r.jsx)("div",{className:`image-compare__slider ${c}`,onMouseDown:e=>{e.stopPropagation(),e.preventDefault(),g(!0)},style:{position:"absolute",backgroundColor:"white",zIndex:10,..."horizontal"===c?{left:`${h}%`,top:0,width:"4px",height:"100%",transform:"translateX(-50%)",cursor:"col-resize"}:{top:`${h}%`,left:0,width:"100%",height:"4px",transform:"translateY(-50%)",cursor:"row-resize"}}})]})]})]})},save:({attributes:e})=>(0,r.jsx)("div",{...t.useBlockProps.save({className:`image-compare-block ${e.orientation}`,style:{width:`${e.width}px`,height:`${e.height}px`}}),children:(0,r.jsxs)("div",{className:"image-compare__preview",children:[(0,r.jsx)("img",{src:e.imageBefore,className:"image-compare__before",draggable:"false",style:{width:"100%",height:"vertical"===e.orientation?"100%":"auto"}}),(0,r.jsx)("div",{className:`image-compare__after-wrapper ${e.orientation}`,children:(0,r.jsx)("img",{src:e.imageAfter,draggable:"false",className:"image-compare__after"})}),(0,r.jsx)("div",{className:`image-compare__slider ${e.orientation}`})]})})})}},a={};function o(e){var i=a[e];if(void 0!==i)return i.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,a,i,r)=>{if(!a){var n=1/0;for(m=0;m<e.length;m++){for(var[a,i,r]=e[m],s=!0,l=0;l<a.length;l++)(!1&r||n>=r)&&Object.keys(o.O).every((e=>o.O[e](a[l])))?a.splice(l--,1):(s=!1,r<n&&(n=r));if(s){e.splice(m--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var m=e.length;m>0&&e[m-1][2]>r;m--)e[m]=e[m-1];e[m]=[a,i,r]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={285:0,73:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var i,r,[n,s,l]=a,c=0;if(n.some((t=>0!==e[t]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(l)var m=l(o)}for(t&&t(a);c<n.length;c++)r=n[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(m)},a=globalThis.webpackChunkimage_compare=globalThis.webpackChunkimage_compare||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var i=o.O(void 0,[73],(()=>o(141)));i=o.O(i)})();